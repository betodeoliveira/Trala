<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<!-- ScrollTrigger -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<!-- Swiper Library -->
<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>

<script>
    gsap.registerPlugin(ScrollTrigger);

    // [ Swiper JS ]
    $(".swiper_component").each(function () {
        const swiper = new Swiper($(this).find(".swiper")[0], {
            slidesPerView: "auto",
            pagination: {
                el: $(this).find(".swiper_bullets-wrapper")[0],
                bulletActiveClass: "is-active",
                bulletClass: "swiper_bullet",
                bulletElement: "button",
                clickable: true
            },
            navigation: {
                nextEl: $(this).find("[swiper-next]")[0],
                prevEl: $(this).find("[swiper-prev]")[0],
                disabledClass: "is-disabled"
            }
        });
    });

    // [ Genre Marquee ]
    $(".genre-marquee_component").each(function() {
        let marqueeList = $(this).find(".genre-marquee_list");
        let marqueeListWrapper = $(this).find(".genre-marquee_wrapper");
        $(marqueeList).clone().appendTo(marqueeListWrapper);
        $(marqueeList).clone().appendTo(marqueeListWrapper);

        let genresAmount = $(this).find(".genre-marquee_item").length;
        let duration = 30 * (genresAmount / 20);

        let genreMarqueeTimeline = gsap.timeline({ repeat: -1 });
        genreMarqueeTimeline.to(marqueeList, {x: "-100%", duration: duration, ease: "none"});

        $(marqueeList).on("mouseenter", function() {
            genreMarqueeTimeline.pause();
        });

        $(marqueeList).on("mouseleave", function() {
            genreMarqueeTimeline.resume();
        });
    });


    // [ Featured Stories Interaction ]
    $(".featured-stories_layout").each(function() {

        let storiesTimeline = gsap.timeline({ paused: true, ease: "power2.out" });

        storiesTimeline.set($(this).find(".featured-stories_lightbox-link"), { display: "flex" });
        storiesTimeline.fromTo($(this).find(".featured-stories_lightbox-link"), { opacity: 0 }, { opacity: 1, duration: 0.3 }, "<");
        
        storiesTimeline.to($(this).find(".teachers-filters_type-wrapper"), { y: "3rem", opacity: 0, duration: 0.5, ease: "back.inOut(1.7)", stagger: { from: "end", amount: 0.1 }}, "<");

        storiesTimeline.set($(this).find(".featured-stories_button-wrapper"), { display: "block" });
        storiesTimeline.fromTo($(this).find(".featured-stories_button-wrapper"), { opacity: 0 }, { opacity: 1, duration: 0.125 }, "<");
        storiesTimeline.fromTo($(this).find("[featured-stories-lightbox-button]"), { opacity: 0 }, { opacity: 1, duration: 0.125 }, "<");

        $(this).on("mouseenter", function() {
            storiesTimeline.play();
        });

        $(this).on("mouseleave", function() {
            storiesTimeline.reverse();
        });
    });
</script>